{% extends 'base.html' %}

{% block title %}Active Campaigns - CrowdFund{% endblock %}

{% block content %}
<!-- Breadcrumbs navigation -->
<nav class="bg-gray-50 p-3 mb-5 rounded-lg shadow-sm" aria-label="Breadcrumb">
  <ol class="flex flex-wrap text-sm">
    <li class="flex items-center">
      <a href="{% url 'home' %}" class="text-blue-600 hover:text-blue-800 font-medium">
        Home
      </a>
      <span class="text-gray-400 mx-2">/</span>
    </li>
    <li>
      <span class="text-gray-700 font-medium">Active Campaigns</span>
    </li>
  </ol>
</nav>

<div class="mb-6">
    <h1 class="text-3xl font-bold text-gray-800 mb-2">Active Campaigns</h1>
    <div class="h-1 w-24 bg-blue-600 mt-2 mb-4"></div>
    <p class="text-gray-600">Browse our active fundraising campaigns and support a cause today.</p>
</div>

{% if campaigns %}
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {% for campaign in campaigns %}
            <div class="bg-white p-6 rounded-lg shadow-md border border-gray-100 hover:shadow-lg transition-shadow duration-200">
                {% if campaign.cover_image %}
                    <div class="mb-4 h-48 overflow-hidden rounded-md">
                        <img src="{{ campaign.cover_image.url }}" alt="{{ campaign.title }}" class="w-full h-full object-cover">
                    </div>
                {% endif %}
                
                <!-- Status Badge -->
                <div class="mb-3">
                    {% if campaign.status == 'pending' %}
                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-md text-xs font-medium bg-yellow-100 text-yellow-800 border border-yellow-200">
                        <span class="h-2 w-2 rounded-full bg-yellow-500 mr-1"></span>
                        Pending Review
                    </span>
                    {% elif campaign.status == 'active' %}
                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-md text-xs font-medium bg-green-100 text-green-800 border border-green-200">
                        <span class="h-2 w-2 rounded-full bg-green-500 mr-1 animate-pulse"></span>
                        Active
                    </span>
                    {% elif campaign.status == 'closed' %}
                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-md text-xs font-medium bg-gray-100 text-gray-800 border border-gray-200">
                        <span class="h-2 w-2 rounded-full bg-gray-500 mr-1"></span>
                        Closed
                    </span>
                    {% elif campaign.status == 'rejected' %}
                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-md text-xs font-medium bg-red-100 text-red-800 border border-red-200">
                        <span class="h-2 w-2 rounded-full bg-red-500 mr-1"></span>
                        Rejected
                    </span>
                    {% endif %}
                </div>
                
                <h2 class="text-xl font-bold mb-2 line-clamp-2"><a href="{% url 'funding:campaign_detail' campaign.pk %}" class="text-gray-800 hover:text-blue-600 transition-colors duration-200">{{ campaign.title }}</a></h2>
                
                <p class="text-gray-700 mb-2"><strong>Organisation:</strong> {{ campaign.organisation.name }}</p>
                
                <div class="flex justify-between items-center mb-3">
                    <p class="text-gray-700"><strong>Goal:</strong> ${{ campaign.goal }}</p>
                    {% if campaign.raised_amount %}
                        <p class="text-gray-700"><strong>Raised:</strong> ${{ campaign.raised_amount }}</p>
                    {% endif %}
                </div>
                
                {% if campaign.goal and campaign.raised_amount %}
                    <div class="w-full bg-gray-200 rounded-full h-2.5 mb-4 overflow-hidden">
                        {% widthratio campaign.raised_amount campaign.goal 100 as progress_percent %}
                        {% if progress_percent <= 25 %}
                            <div class="bg-green-600 h-2.5 rounded-full w-1/4"></div>
                        {% elif progress_percent <= 50 %}
                            <div class="bg-green-600 h-2.5 rounded-full w-2/4"></div>
                        {% elif progress_percent <= 75 %}
                            <div class="bg-green-600 h-2.5 rounded-full w-3/4"></div>
                        {% else %}
                            <div class="bg-green-600 h-2.5 rounded-full w-full"></div>
                        {% endif %}
                    </div>
                    <p class="text-xs text-gray-600 mb-3 text-right">{{ progress_percent }}% of goal reached</p>
                {% endif %}
                
                <div class="flex justify-between items-center">
                    <p class="text-gray-500 text-sm">Created: {{ campaign.created_at|date:"d M Y" }}</p>
                    <a href="{% url 'funding:campaign_detail' campaign.pk %}" class="inline-flex items-center text-sm font-medium text-blue-600 hover:text-blue-800">
                        View Details
                        <svg class="w-4 h-4 ml-1" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" d="M10.293 15.707a1 1 0 010-1.414L14.586 10l-4.293-4.293a1 1 0 111.414-1.414l5 5a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                        </svg>
                    </a>
                </div>
            </div>
        {% endfor %}
    </div>
{% else %}
    <div class="bg-gray-50 p-8 rounded-lg border border-gray-200 text-center">
        <svg class="w-16 h-16 text-gray-400 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
        </svg>
        <p class="text-xl font-medium text-gray-700 mb-2">No active campaigns at the moment</p>
        <p class="text-gray-600">Check back soon or contact us to start your own campaign!</p>
    </div>
{% endif %}
{% endblock %}
